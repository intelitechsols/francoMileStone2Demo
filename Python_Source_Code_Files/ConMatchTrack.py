__author__ ="InteliTech"#line:1
__copyright__ ="Copyright 2015, InteliTech Solutions"#line:2
import cv2 as O0O0OOO0OOO00O000 #line:4
import itertools as OO00O00OOOO0OOO0O #line:5
from numpy import array as O000O00OO0O0O0OOO ,zeros as OO000O0OOO00OOOOO ,vstack as O00O0OOO000OOOO00 ,hstack as O0O0O0OO0OOOO000O ,math as O00O00000O0OO0000 ,nan as OOO00O00000OO0O0O ,argsort as O0OOOOOO000OO000O ,median as OO0OOO00OOOOOOO0O ,argmax as O0O000O0O0O00O0O0 ,isnan as OO00O0OO0O000OOOO ,append as O0OOO0OOO0O0OO00O #line:7
O0O000000000O000O =__import__ ('scipy.cluster',globals (),locals ())#line:8
O0O000000000O000O =__import__ ('scipy.spatial',globals (),locals ())#line:9
import time as O00O000OO0O000OO0 #line:10
import numpy as O00OO00OOO0OOO0OO #line:12
import helper as O0000O0O0000O0O00 #line:13
class CMT (object ):#line:15
	DETECTOR ='BRISK'#line:17
	DESCRIPTOR ='BRISK'#line:18
	DESC_LENGTH =512 #line:19
	MATCHER ='BruteForce-Hamming'#line:20
	THR_OUTLIER =20 #line:21
	THR_CONF =0.75 #line:22
	THR_RATIO =0.8 #line:23
	estimate_scale =True #line:25
	estimate_rotation =True #line:26
	def initialise (O0OO0OOO0O00O0O0O ,OOOOOOOOO00OOOOO0 ,OO00O0000O0000O00 ,OO0O000000O0OOO00 ):#line:28
		O0OO0OOO0O00O0O0O .detector =O0O0OOO0OOO00O000 .FeatureDetector_create (O0OO0OOO0O00O0O0O .DETECTOR )#line:31
		O0OO0OOO0O00O0O0O .descriptor =O0O0OOO0OOO00O000 .DescriptorExtractor_create (O0OO0OOO0O00O0O0O .DESCRIPTOR )#line:32
		O0OO0OOO0O00O0O0O .matcher =O0O0OOO0OOO00O000 .DescriptorMatcher_create (O0OO0OOO0O00O0O0O .MATCHER )#line:33
		OO00O000O0000O00O =O0OO0OOO0O00O0O0O .detector .detect (OOOOOOOOO00OOOOO0 )#line:36
		O0O000O0OOOOOO000 =O0000O0O0000O0O00 .in_rect (OO00O000O0000O00O ,OO00O0000O0000O00 ,OO0O000000O0OOO00 )#line:39
		O00O0OO0OO00OO0O0 =list (OO00O00OOOO0OOO0O .compress (OO00O000O0000O00O ,O0O000O0OOOOOO000 ))#line:40
		O00O0OO0OO00OO0O0 ,O0OO0OOO0O00O0O0O .selected_features =O0OO0OOO0O00O0O0O .descriptor .compute (OOOOOOOOO00OOOOO0 ,O00O0OO0OO00OO0O0 )#line:41
		OOO0OOOOO000O00OO =O0000O0O0000O0O00 .keypoints_cv_to_np (O00O0OO0OO00OO0O0 )#line:42
		O0O0000OO0O00O0OO =len (O00O0OO0OO00OO0O0 )#line:43
		if O0O0000OO0O00O0OO ==0 :#line:45
			raise Exception ('No keypoints found in selection')#line:46
		OOOOO0O000OOO00O0 =list (OO00O00OOOO0OOO0O .compress (OO00O000O0000O00O ,~O0O000O0OOOOOO000 ))#line:49
		OOOOO0O000OOO00O0 ,O0O00OO00O0OO0O0O =O0OO0OOO0O00O0O0O .descriptor .compute (OOOOOOOOO00OOOOO0 ,OOOOO0O000OOO00O0 )#line:50
		_OO00O0OOO0O00OOO0 =O0000O0O0000O0O00 .keypoints_cv_to_np (OOOOO0O000OOO00O0 )#line:51
		O0OO0OOO0O00O0O0O .selected_classes =O000O00OO0O0O0OOO (range (O0O0000OO0O00O0OO ))+1 #line:54
		O0O00000000OOOO00 =OO000O0OOO00OOOOO (len (OOOOO0O000OOO00O0 ))#line:55
		O0OO0OOO0O00O0O0O .features_database =O00O0OOO000OOOO00 ((O0O00OO00O0OO0O0O ,O0OO0OOO0O00O0O0O .selected_features ))#line:58
		O0OO0OOO0O00O0O0O .database_classes =O0O0O0OO0OOOO000O ((O0O00000000OOOO00 ,O0OO0OOO0O00O0O0O .selected_classes ))#line:61
		O0OO0O000O0000OO0 =O0O000000000O000O .spatial .distance .pdist (OOO0OOOOO000O00OO )#line:64
		O0OO0OOO0O00O0O0O .squareform =O0O000000000O000O .spatial .distance .squareform (O0OO0O000O0000OO0 )#line:65
		OOO000000O0O0OOOO =O00OO00OOO0OOO0OO .empty ((O0O0000OO0O00O0OO ,O0O0000OO0O00O0OO ))#line:68
		for O0OO0OOOO000OO0OO ,OOOOO0OO000O00OOO in zip (OOO0OOOOO000O00OO ,range (O0O0000OO0O00O0OO )):#line:69
			for O0000O0O00OO0O000 ,OO00OOOO00O0OOO00 in zip (OOO0OOOOO000O00OO ,range (O0O0000OO0O00O0OO )):#line:70
				OO0O0000OO0O00OOO =O0000O0O00OO0O000 -O0OO0OOOO000OO0OO #line:73
				OOOO0OOO0O0OOO0OO =O00O00000O0OO0000 .atan2 (OO0O0000OO0O00OOO [1 ],OO0O0000OO0O00OOO [0 ])#line:76
				OOO000000O0O0OOOO [OOOOO0OO000O00OOO ,OO00OOOO00O0OOO00 ]=OOOO0OOO0O0OOO0OO #line:79
		O0OO0OOO0O00O0O0O .angles =OOO000000O0O0OOOO #line:81
		OOOO0OOO0OOO00O00 =O00OO00OOO0OOO0OO .mean (OOO0OOOOO000O00OO ,axis =0 )#line:84
		O0OO0OOO0O00O0O0O .center_to_tl =O00OO00OOO0OOO0OO .array (OO00O0000O0000O00 )-OOOO0OOO0OOO00O00 #line:87
		O0OO0OOO0O00O0O0O .center_to_tr =O00OO00OOO0OOO0OO .array ([OO0O000000O0OOO00 [0 ],OO00O0000O0000O00 [1 ]])-OOOO0OOO0OOO00O00 #line:88
		O0OO0OOO0O00O0O0O .center_to_br =O00OO00OOO0OOO0OO .array (OO0O000000O0OOO00 )-OOOO0OOO0OOO00O00 #line:89
		O0OO0OOO0O00O0O0O .center_to_bl =O00OO00OOO0OOO0OO .array ([OO00O0000O0000O00 [0 ],OO0O000000O0OOO00 [1 ]])-OOOO0OOO0OOO00O00 #line:90
		O0OO0OOO0O00O0O0O .springs =OOO0OOOOO000O00OO -OOOO0OOO0OOO00O00 #line:93
		O0OO0OOO0O00O0O0O .im_prev =OOOOOOOOO00OOOOO0 #line:96
		O0OO0OOO0O00O0O0O .active_keypoints =O00OO00OOO0OOO0OO .copy (OOO0OOOOO000O00OO )#line:99
		O0OO0OOO0O00O0O0O .active_keypoints =O0O0O0OO0OOOO000O ((OOO0OOOOO000O00OO ,O0OO0OOO0O00O0O0O .selected_classes [:,None ]))#line:102
		O0OO0OOO0O00O0O0O .num_initial_keypoints =len (O00O0OO0OO00OO0O0 )#line:105
	def estimate (OO0OO0O0OO00000OO ,O000000OO000000OO ):#line:108
		O0OOO00O000000O0O =O000O00OO0O0O0OOO ((OOO00O00000OO0O0O ,OOO00O00000OO0O0O ))#line:110
		O0000OOO0OOO0O0O0 =OOO00O00000OO0O0O #line:111
		O0000O00OO00O0OOO =OOO00O00000OO0O0O #line:112
		if O000000OO000000OO .size >1 :#line:115
			O0OOOOOOO0O0O00OO =O000000OO000000OO [:,2 ].squeeze ().astype (O00OO00OOO0OOO0OO .int )#line:118
			if O0OOOOOOO0O0O00OO .size ==1 :#line:121
				O0OOOOOOO0O0O00OO =O0OOOOOOO0O0O00OO [None ]#line:122
			OO000O0O00OOOOO00 =O0OOOOOO000OO000O (O0OOOOOOO0O0O00OO )#line:125
			O000000OO000000OO =O000000OO000000OO [OO000O0O00OOOOO00 ]#line:126
			O0OOOOOOO0O0O00OO =O0OOOOOOO0O0O00OO [OO000O0O00OOOOO00 ]#line:127
			OO0O0O0000000O000 =O000O00OO0O0O0OOO ([OO0O0O0O0O00O0000 for OO0O0O0O0O00O0000 in OO00O00OOOO0OOO0O .product (range (O000000OO000000OO .shape [0 ]),repeat =2 )])#line:130
			OO0O0O0000000O000 =OO0O0O0000000O000 [OO0O0O0000000O000 [:,0 ]!=OO0O0O0000000O000 [:,1 ],:]#line:133
			OOOOO00O0O0000OO0 =OO0O0O0000000O000 [:,0 ]#line:136
			OOOOO0O0OOOO00O0O =OO0O0O0000000O000 [:,1 ]#line:137
			O0OO00000OO00O00O =O0OOOOOOO0O0O00OO [OOOOO00O0O0000OO0 ]-1 #line:139
			O0000OO0OOO0OO00O =O0OOOOOOO0O0O00OO [OOOOO0O0OOOO00O0O ]-1 #line:140
			OOOO0OOO000O00O0O =O0OO00000OO00O00O ==O0000OO0OOO0OO00O #line:142
			if not all (OOOO0OOO000O00O0O ):#line:144
				OOOOO00O0O0000OO0 =OOOOO00O0O0000OO0 [~OOOO0OOO000O00O0O ]#line:145
				OOOOO0O0OOOO00O0O =OOOOO0O0OOOO00O0O [~OOOO0OOO000O00O0O ]#line:146
				O0OO00000OO00O00O =O0OO00000OO00O00O [~OOOO0OOO000O00O0O ]#line:148
				O0000OO0OOO0OO00O =O0000OO0OOO0OO00O [~OOOO0OOO000O00O0O ]#line:149
				O0O0000O000OOO00O =O000000OO000000OO [OOOOO00O0O0000OO0 ,:2 ]#line:151
				O0O0O0OO00O00OO0O =O000000OO000000OO [OOOOO0O0OOOO00O0O ,:2 ]#line:152
				O0O0O000OOO000O00 =O0000O0O0000O0O00 .L2norm (O0O0000O000OOO00O -O0O0O0OO00O00OO0O )#line:156
				OO0O000OOO0OO0O0O =OO0OO0O0OO00000OO .squareform [O0OO00000OO00O00O ,O0000OO0OOO0OO00O ]#line:158
				O0OO0O0OO00O0OOO0 =O0O0O000OOO000O00 /OO0O000OOO0OO0O0O #line:160
				OO0O000OO00OO0000 =O00OO00OOO0OOO0OO .empty ((O0O0000O000OOO00O .shape [0 ]))#line:163
				O0O000O0000000OO0 =O0O0O0OO00O00OO0O -O0O0000O000OOO00O #line:165
				OO0O000OO00OO0000 =O00OO00OOO0OOO0OO .arctan2 (O0O000O0000000OO0 [:,1 ],O0O000O0000000OO0 [:,0 ])#line:166
				O00O0OO0O00OOO00O =OO0OO0O0OO00000OO .angles [O0OO00000OO00O00O ,O0000OO0OOO0OO00O ]#line:168
				OO00O00OO00O0O0OO =OO0O000OO00OO0000 -O00O0OO0O00OOO00O #line:170
				OOOOO0O00O00O0OOO =O00OO00OOO0OOO0OO .abs (OO00O00OO00O0O0OO )>O00O00000O0OO0000 .pi #line:173
				OO00O00OO00O0O0OO [OOOOO0O00O00O0OOO ]=OO00O00OO00O0O0OO [OOOOO0O00O00O0OOO ]-O00OO00OOO0OOO0OO .sign (OO00O00OO00O0O0OO [OOOOO0O00O00O0OOO ])*2 *O00O00000O0OO0000 .pi #line:175
				O0000OOO0OOO0O0O0 =OO0OOO00OOOOOOO0O (O0OO0O0OO00O0OOO0 )#line:177
				if not OO0OO0O0OO00000OO .estimate_scale :#line:178
					O0000OOO0OOO0O0O0 =1 ;#line:179
				O0000O00OO00O0OOO =OO0OOO00OOOOOOO0O (OO00O00OO00O0O0OO )#line:181
				if not OO0OO0O0OO00000OO .estimate_rotation :#line:182
					O0000O00OO00O0OOO =0 ;#line:183
				OOO0OO0O0O0O00OOO =O000000OO000000OO [:,2 ].astype (O00OO00OOO0OOO0OO .int )#line:185
				OOO000000O0OO000O =O000000OO000000OO [:,:2 ]-O0000OOO0OOO0O0O0 *(O0000O0O0000O0O00 .rotate (OO0OO0O0OO00000OO .springs [OOO0OO0O0O0O00OOO -1 ],O0000O00OO00O0OOO ))#line:186
				OO0OO0O0OO00000OO .votes =OOO000000O0OO000O #line:189
				O0OO0O0OO0OO0O00O =O0O000000000O000O .spatial .distance .pdist (OOO000000O0OO000O )#line:192
				OOOO0O0OO000O00OO =O0O000000000O000O .cluster .hierarchy .linkage (O0OO0O0OO0OO0O00O )#line:195
				O000OOOOOO00O000O =O0O000000000O000O .cluster .hierarchy .fcluster (OOOO0O0OO000O00OO ,OO0OO0O0OO00000OO .THR_OUTLIER ,criterion ='distance')#line:198
				OO00000OO000O000O =O00OO00OOO0OOO0OO .bincount (O000OOOOOO00O000O )#line:201
				O00O0O00000OOOOO0 =O0O000O0O0O00O0O0 (OO00000OO000O000O )#line:204
				OOOOOOOOO0O0O000O =O000OOOOOO00O000O ==O00O0O00000OOOOO0 #line:207
				OO0OO0O0OO00000OO .outliers =O000000OO000000OO [~OOOOOOOOO0O0O000O ,:]#line:211
				O000000OO000000OO =O000000OO000000OO [OOOOOOOOO0O0O000O ,:]#line:214
				OOO000000O0OO000O =OOO000000O0OO000O [OOOOOOOOO0O0O000O ,:]#line:217
				O0OOO00O000000O0O =O00OO00OOO0OOO0OO .mean (OOO000000O0OO000O ,axis =0 )#line:220
		return (O0OOO00O000000O0O ,O0000OOO0OOO0O0O0 ,O0000O00OO00O0OOO ,O000000OO000000OO )#line:222
	def process_frame (O0000O0000O00OOO0 ,O0O0O00000OOO000O ):#line:224
		OOO00O0OO0O00000O ,_O0OOO0O000O000000 =O0000O0O0000O0O00 .track (O0000O0000O00OOO0 .im_prev ,O0O0O00000OOO000O ,O0000O0000O00OOO0 .active_keypoints )#line:226
		(O00OOO0O000000000 ,OOO0O0O00OO0O0OO0 ,O00OO0OO0O0O0O0OO ,OOO00O0OO0O00000O )=O0000O0000O00OOO0 .estimate (OOO00O0OO0O00000O )#line:227
		OOO0O000OO0O000OO =O0000O0000O00OOO0 .detector .detect (O0O0O00000OOO000O )#line:230
		OOO0O000OO0O000OO ,OO000OOOOOOO0O00O =O0000O0000O00OOO0 .descriptor .compute (O0O0O00000OOO000O ,OOO0O000OO0O000OO )#line:231
		OO000O0000OOO0O0O =OO000O0OOO00OOOOO ((0 ,3 ))#line:234
		OOO0OO0OO00O0OO00 =O0000O0000O00OOO0 .matcher .knnMatch (OO000OOOOOOO0O00O ,O0000O0000O00OOO0 .features_database ,2 )#line:237
		if not any (OO00O0OO0O000OOOO (O00OOO0O000000000 )):#line:239
			OO0O00OOOOOOO0OO0 =O0000O0000O00OOO0 .matcher .knnMatch (OO000OOOOOOO0O00O ,O0000O0000O00OOO0 .selected_features ,len (O0000O0000O00OOO0 .selected_features ))#line:240
		if len (OOO0O000OO0O000OO )>0 :#line:244
			OOO0O0OOOOOOO0O00 =OOO0O0O00OO0O0OO0 *O0000O0O0000O0O00 .rotate (O0000O0000O00OOO0 .springs ,-O00OO0OO0O0O0O0OO )#line:245
			for O0O00O0OO00OOOO0O in range (len (OOO0O000OO0O000OO )):#line:246
				OO0O0000O00O00OO0 =O00OO00OOO0OOO0OO .array (OOO0O000OO0O000OO [O0O00O0OO00OOOO0O ].pt )#line:249
				O000OOOOO0OOOO00O =OOO0OO0OO00O0OO00 [O0O00O0OO00OOOO0O ]#line:253
				OOOO000O00O000000 =O00OO00OOO0OOO0OO .array ([OOO0OOOO00000O0O0 .distance for OOO0OOOO00000O0O0 in O000OOOOO0OOOO00O ])#line:254
				OO00OOO00OOOO0000 =1 -OOOO000O00O000000 /O0000O0000O00OOO0 .DESC_LENGTH #line:257
				O00OO000OOO0O00O0 =O0000O0000O00OOO0 .database_classes #line:259
				O00OO0O0O00O0O000 =O000OOOOO0OOOO00O [0 ].trainIdx #line:262
				O0O0O0000OOO0O000 =O000OOOOO0OOOO00O [1 ].trainIdx #line:263
				O0000O000000O0000 =(1 -OO00OOO00OOOO0000 [0 ])/(1 -OO00OOO00OOOO0000 [1 ])#line:266
				O0OO0OO00OOO0000O =O00OO000OOO0O00O0 [O00OO0O0O00O0O000 ]#line:269
				if O0000O000000O0000 <O0000O0000O00OOO0 .THR_RATIO and OO00OOO00OOOO0000 [0 ]>O0000O0000O00OOO0 .THR_CONF and O0OO0OO00OOO0000O !=0 :#line:272
					O0OOO00OO000O00O0 =O0OOO0OOO0O0OO00O (OO0O0000O00O00OO0 ,O0OO0OO00OOO0000O )#line:275
					OO000O0000OOO0O0O =O0OOO0OOO0O0OO00O (OO000O0000OOO0O0O ,O000O00OO0O0O0OOO ([O0OOO00OO000O00O0 ]),axis =0 )#line:276
				if not any (OO00O0OO0O000OOOO (O00OOO0O000000000 )):#line:280
					O000OOOOO0OOOO00O =OO0O00OOOOOOO0OO0 [O0O00O0OO00OOOO0O ]#line:283
					OOOO000O00O000000 =O00OO00OOO0OOO0OO .array ([O0OO0000O000O0000 .distance for O0OO0000O000O0000 in O000OOOOO0OOOO00O ])#line:284
					OO0O0000OO0000000 =O00OO00OOO0OOO0OO .argsort (O00OO00OOO0OOO0OO .array ([OO00O0OO0OOOOO00O .trainIdx for OO00O0OO0OOOOO00O in O000OOOOO0OOOO00O ]))#line:286
					OOOO000O00O000000 =OOOO000O00O000000 [OO0O0000OO0000000 ]#line:287
					O0O000O0000OOO0OO =1 -OOOO000O00O000000 /O0000O0000O00OOO0 .DESC_LENGTH #line:290
					O00O00OO00000000O =OO0O0000O00O00OO0 -O00OOO0O000000000 #line:293
					OO0OOOO00O0OOOOO0 =O0000O0O0000O0O00 .L2norm (OOO0O0OOOOOOO0O00 -O00O00OO00000000O )#line:296
					OOO00OO00O0O000O0 =OO0OOOO00O0OOOOO0 <O0000O0000O00OOO0 .THR_OUTLIER #line:299
					OO00OOO00OOOO0000 =OOO00OO00O0O000O0 *O0O000O0000OOO0OO #line:301
					O00OO000OOO0O00O0 =O0000O0000O00OOO0 .selected_classes #line:303
					O000O00O000OOO0O0 =O0OOOOOO000OO000O (OO00OOO00OOOO0000 )[::-1 ]#line:306
					O00OO0O0O00O0O000 =O000O00O000OOO0O0 [0 ]#line:309
					O0O0O0000OOO0O000 =O000O00O000OOO0O0 [1 ]#line:310
					O0000O000000O0000 =(1 -OO00OOO00OOOO0000 [O00OO0O0O00O0O000 ])/(1 -OO00OOO00OOOO0000 [O0O0O0000OOO0O000 ])#line:313
					O0OO0OO00OOO0000O =O00OO000OOO0O00O0 [O00OO0O0O00O0O000 ]#line:316
					if O0000O000000O0000 <O0000O0000O00OOO0 .THR_RATIO and OO00OOO00OOOO0000 [O00OO0O0O00O0O000 ]>O0000O0000O00OOO0 .THR_CONF and O0OO0OO00OOO0000O !=0 :#line:319
						O0OOO00OO000O00O0 =O0OOO0OOO0O0OO00O (OO0O0000O00O00OO0 ,O0OO0OO00OOO0000O )#line:322
						if OO000O0000OOO0O0O .size >0 :#line:325
							OO0OO00OO0OOOO00O =O00OO00OOO0OOO0OO .nonzero (OO000O0000OOO0O0O [:,2 ]==O0OO0OO00OOO0000O )#line:326
							OO000O0000OOO0O0O =O00OO00OOO0OOO0OO .delete (OO000O0000OOO0O0O ,OO0OO00OO0OOOO00O ,axis =0 )#line:327
						OO000O0000OOO0O0O =O0OOO0OOO0O0OO00O (OO000O0000OOO0O0O ,O000O00OO0O0O0OOO ([O0OOO00OO000O00O0 ]),axis =0 )#line:329
		if OOO00O0OO0O00000O .size >0 :#line:332
			O00OO00OO000O00OO =OOO00O0OO0O00000O [:,2 ]#line:335
			if OO000O0000OOO0O0O .size >0 :#line:338
				OOO00O0O0OOOO0OO0 =OO000O0000OOO0O0O [:,2 ]#line:341
				O0O0O0OO00O0OOOOO =~O00OO00OOO0OOO0OO .in1d (O00OO00OO000O00OO ,OOO00O0O0OOOO0OO0 )#line:342
				OO000O0000OOO0O0O =O0OOO0OOO0O0OO00O (OO000O0000OOO0O0O ,OOO00O0OO0O00000O [O0O0O0OO00O0OOOOO ,:],axis =0 )#line:343
			else :#line:346
				OO000O0000OOO0O0O =OOO00O0OO0O00000O #line:347
		_O0OOO0O000O000000 =OO000O0000OOO0O0O #line:350
		O0000O0000O00OOO0 .center =O00OOO0O000000000 #line:351
		O0000O0000O00OOO0 .scale_estimate =OOO0O0O00OO0O0OO0 #line:352
		O0000O0000O00OOO0 .rotation_estimate =O00OO0OO0O0O0O0OO #line:353
		O0000O0000O00OOO0 .tracked_keypoints =OOO00O0OO0O00000O #line:354
		O0000O0000O00OOO0 .active_keypoints =OO000O0000OOO0O0O #line:355
		O0000O0000O00OOO0 .im_prev =O0O0O00000OOO000O #line:356
		O0000O0000O00OOO0 .keypoints_cv =OOO0O000OO0O000OO #line:357
		_O0OOO0O000O000000 =O00O000OO0O000OO0 .time ()#line:358
		O0000O0000O00OOO0 .tl =(OOO00O00000OO0O0O ,OOO00O00000OO0O0O )#line:360
		O0000O0000O00OOO0 .tr =(OOO00O00000OO0O0O ,OOO00O00000OO0O0O )#line:361
		O0000O0000O00OOO0 .br =(OOO00O00000OO0O0O ,OOO00O00000OO0O0O )#line:362
		O0000O0000O00OOO0 .bl =(OOO00O00000OO0O0O ,OOO00O00000OO0O0O )#line:363
		O0000O0000O00OOO0 .bb =O000O00OO0O0O0OOO ([OOO00O00000OO0O0O ,OOO00O00000OO0O0O ,OOO00O00000OO0O0O ,OOO00O00000OO0O0O ])#line:365
		O0000O0000O00OOO0 .has_result =False #line:367
		if not any (OO00O0OO0O000OOOO (O0000O0000O00OOO0 .center ))and O0000O0000O00OOO0 .active_keypoints .shape [0 ]>O0000O0000O00OOO0 .num_initial_keypoints /10 :#line:368
			O0000O0000O00OOO0 .has_result =True #line:369
			O0O000O0000O0O0OO =O0000O0O0000O0O00 .array_to_int_tuple (O00OOO0O000000000 +OOO0O0O00OO0O0OO0 *O0000O0O0000O0O00 .rotate (O0000O0000O00OOO0 .center_to_tl [None ,:],O00OO0OO0O0O0O0OO ).squeeze ())#line:371
			OOO0O00O0OOOO00O0 =O0000O0O0000O0O00 .array_to_int_tuple (O00OOO0O000000000 +OOO0O0O00OO0O0OO0 *O0000O0O0000O0O00 .rotate (O0000O0000O00OOO0 .center_to_tr [None ,:],O00OO0OO0O0O0O0OO ).squeeze ())#line:372
			OO0OOOOOOOO0O00OO =O0000O0O0000O0O00 .array_to_int_tuple (O00OOO0O000000000 +OOO0O0O00OO0O0OO0 *O0000O0O0000O0O00 .rotate (O0000O0000O00OOO0 .center_to_br [None ,:],O00OO0OO0O0O0O0OO ).squeeze ())#line:373
			O00OO0000O000O0O0 =O0000O0O0000O0O00 .array_to_int_tuple (O00OOO0O000000000 +OOO0O0O00OO0O0OO0 *O0000O0O0000O0O00 .rotate (O0000O0000O00OOO0 .center_to_bl [None ,:],O00OO0OO0O0O0O0OO ).squeeze ())#line:374
			O0OOO0O00OOO0OO0O =min ((O0O000O0000O0O0OO [0 ],OOO0O00O0OOOO00O0 [0 ],OO0OOOOOOOO0O00OO [0 ],O00OO0000O000O0O0 [0 ]))#line:376
			O0O00OOOO00000O00 =min ((O0O000O0000O0O0OO [1 ],OOO0O00O0OOOO00O0 [1 ],OO0OOOOOOOO0O00OO [1 ],O00OO0000O000O0O0 [1 ]))#line:377
			OOO0O00000O0O0OOO =max ((O0O000O0000O0O0OO [0 ],OOO0O00O0OOOO00O0 [0 ],OO0OOOOOOOO0O00OO [0 ],O00OO0000O000O0O0 [0 ]))#line:378
			OOOOO00O0O0000O00 =max ((O0O000O0000O0O0OO [1 ],OOO0O00O0OOOO00O0 [1 ],OO0OOOOOOOO0O00OO [1 ],O00OO0000O000O0O0 [1 ]))#line:379
			O0000O0000O00OOO0 .tl =O0O000O0000O0O0OO #line:381
			O0000O0000O00OOO0 .tr =OOO0O00O0OOOO00O0 #line:382
			O0000O0000O00OOO0 .bl =O00OO0000O000O0O0 #line:383
			O0000O0000O00OOO0 .br =OO0OOOOOOOO0O00OO #line:384
			O0000O0000O00OOO0 .bb =O00OO00OOO0OOO0OO .array ([O0OOO0O00OOO0OO0O ,O0O00OOOO00000O00 ,OOO0O00000O0O0OOO -O0OOO0O00OOO0OO0O ,OOOOO00O0O0000O00 -O0O00OOOO00000O00 ])
#e9015584e6a44b14988f13e2298bcbf9
